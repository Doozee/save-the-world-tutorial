<div class="home container">
  <div class="row">
    <div class="col-md-9 col-sm-12">
      <section>
        <md-card>
          <md-card-title>
            Welcome to the <a target="_blank" href="https://scaphold.io/blog/2016/07/17/api-for-charity.html">"Save The World" tutorial</a>!
          </md-card-title>
          <md-card-content>
            <p>
              This is an example of an application that you can build on Scaphold.io. 
              We built it with Angular2, Apollo Client, Webpack, and powered it with <a target="_blank" href="https://scaphold.io">Scaphold's</a> GraphQL platform!
              If you are interested in learning more about how we built this site, check out our <a target="_blank" href="https://scaphold.io/blog">full tutorial</a>!
            </p>
            <p>
              This site is the real deal. At the end of the month, we will donate every penny that you give via this site to the
              charity of your choice! We use Scaphold's <a target="_blank" href="https://www.stripe.com">Stripe</a> integration to securely process payments,
              <a target="_blank" href="https://www.mailgun.com">Mailgun</a> integration to send thank you notes, and permission system to protect our data from
              from unwanted eyes.
            </p>
            <p>
              If you would like a charity added to this list, suggest it using using the link in the top right!
              We curate the set of charities to guarantee they are high quality organizations but would love to add your favorites! 
            </p>
            <b>Thank you for your giving! Please let us know if we can do anything else to make your experience a little better!</b>
          </md-card-content>
        </md-card>
      </section>

      <section>
        <div *ngIf="!auth.credential.token" class="row">
          <scaphold-register-form class="col-md-6"></scaphold-register-form>
          <scaphold-login-form class="col-md-6"></scaphold-login-form>
        </div>
        <md-card *ngIf="auth.credential.token">
          <md-card-title>
            Welcome!
          </md-card-title>
          <md-card-content *ngIf="auth.user">
            Logged in as {{auth.user.username}}
          </md-card-content>
          <md-card-actions>
            <button (click)="auth.logout()" md-button>Logout</button>
          </md-card-actions>
        </md-card>
      </section>

      <section>
        <donation></donation>
      </section>
    </div>
    <div class="col-md-3 col-sm-12">

      <section class="pagination">
        <md-card>
          <md-card-title>Recent Donations</md-card-title>
          <md-card-actions>
            <button md-button (click)="getPreviousPageOfUsers()" class="btn">Previous</button>
            <button md-button (click)="getNextPageOfUsers()" class="btn">Next</button>
          </md-card-actions>
        </md-card>
      </section>
      <section class="section-content">
        <div *ngIf="data.viewer && data.viewer.allDonations">
          <div *ngFor="let edge of data.viewer.allDonations.edges">
            <md-card>
              <md-card-title *ngIf="edge.node.charity">
                <a target="_blank" [href]="edge.node.charity.url">{{edge.node.charity.name}}</a>
              </md-card-title>
              <md-card-content>
                <div>{{edge.node.description}}</div>
                <br>
                <span>$ {{edge.node.amount / 100}}</span>
              </md-card-content>
            </md-card>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>